<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="Tao An - AI Researcher at Hawaii Pacific University">
    <meta name="keywords" content="Tao An, AI Research, Machine Learning, Hawaii Pacific University">
    <meta name="author" content="Tao An">
    <meta property="og:title" content="Tao An">
    <meta property="og:description" content="AI Researcher focused on building impactful technology">
    <meta property="og:type" content="website">
    <title>Tao An Official Site</title>
    <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="/favicon/site.webmanifest" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600;8..60,700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Hand-drawn filter for card icons -->
    <svg style="position: absolute; width: 0; height: 0;">
        <defs>
            <filter id="hand-drawn-card" x="-20%" y="-20%" width="140%" height="140%" color-interpolation-filters="sRGB">
                <feTurbulence type="fractalNoise" baseFrequency="0.008" numOctaves="4" result="noise" />
                <feGaussianBlur in="noise" stdDeviation="2.5" result="smoothNoise" />
                <feDisplacementMap in="SourceGraphic" in2="smoothNoise" scale="1" xChannelSelector="R" yChannelSelector="G" />
            </filter>
        </defs>
    </svg>

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <a href="/" class="nav-logo"><span class="logo-char">T</span><span class="logo-char">\</span><span class="logo-char">A</span></a>
            <div class="nav-links">
                <a href="#about">About</a>
                <a href="#research">Research</a>
                <a href="#connect">Connect</a>
            </div>
        </div>
    </nav>

    <main>
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-content">
                <h1 class="hero-title">
                    <strong><span class="word-fade" style="--i:5">AI</span> <span class="word-fade underline"
                            style="--i:2">research</span> <span class="word-fade" style="--i:7">and</span>
                        <span class="word-fade underline" style="--i:0">engineering</span> <span class="word-fade"
                            style="--i:4">that</span>
                        <span class="word-fade" style="--i:6">create</span> <span class="word-fade"
                            style="--i:1">real</span> <span class="word-fade" style="--i:3">impact.</span></strong>
                </h1>
                <p class="hero-description fade-in" style="animation-delay: 1.2s;">
                    I'm an AI researcher at Hawaii Pacific University, passionate about
                    developing machine learning solutions that bridge academic research
                    with practical applications.
                </p>
            </div>
            <div class="hero-visual fade-in" style="animation-delay: 0s;">
                <!-- D3.js Neural Network -->
                <div class="illustration-container" id="neural-network"></div>
            </div>
        </section>

        <!-- About Section -->
        <section class="about-section" id="about">
            <div class="about-container">
                <div class="about-avatar fade-on-scroll">
                    <img src="https://oss.v-dk.com/img/202511260002211.jpg" alt="Tao An" class="avatar-img">
                </div>
                <div class="about-content fade-on-scroll">
                    <h2 class="section-title">About Tao An</h2>
                    <p class="about-text">
                        As an AI researcher, I focus on developing innovative solutions
                        that advance the field of artificial intelligence. My work spans
                        machine learning, natural language processing, and AI systems design.
                    </p>
                    <p class="about-text">
                        I believe in the power of technology to solve real-world problems
                        and am committed to responsible AI development that benefits society.
                    </p>
                </div>
            </div>
        </section>

        <!-- Featured Cards -->
        <section class="cards-section" id="research">
            <div class="cards-grid">
                <a href="https://tao-hpu.medium.com/" target="_blank"
                    rel="noopener noreferrer" class="card card-beige fade-on-scroll">
                    <div class="card-icon">
                        <svg viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22 58 L52 28 L58 34 L28 64 L20 66 Z" stroke="#191918" stroke-width="2" fill="none" />
                            <path d="M52 28 L56 24 C58 22 62 22 64 24 C66 26 66 30 64 32 L58 34" stroke="#191918" stroke-width="2" fill="none" />
                            <line x1="26" y1="60" x2="54" y2="32" stroke="#191918" stroke-width="1.5" />
                        </svg>
                    </div>
                    <h3 class="card-title">Articles & Insights</h3>
                    <p class="card-subtitle">Medium</p>
                </a>

                <a href="https://arxiv.org/a/0009-0006-2933-0320.html" target="_blank" rel="noopener noreferrer"
                    class="card card-green fade-on-scroll">
                    <div class="card-icon">
                        <svg viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Paper with folded corner -->
                            <path class="paper-body" d="M18 12 L50 12 L62 24 L62 68 L18 68 Z" stroke="#191918" stroke-width="2" fill="none" />
                            <path class="paper-fold" d="M50 12 L50 24 L62 24" stroke="#191918" stroke-width="2" fill="none" />
                            <!-- Text lines -->
                            <rect class="text-line" x="24" y="32" width="32" height="4" rx="1" fill="#191918" />
                            <rect class="text-line" x="24" y="42" width="32" height="4" rx="1" fill="#191918" />
                            <rect class="text-line" x="24" y="52" width="20" height="4" rx="1" fill="#191918" />
                        </svg>
                    </div>
                    <h3 class="card-title">Preprints & Papers</h3>
                    <p class="card-subtitle">arXiv</p>
                </a>

                <a href="https://github.com/tao-hpu" target="_blank" rel="noopener noreferrer"
                    class="card card-purple fade-on-scroll">
                    <div class="card-icon">
                        <svg viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M25 55 L40 40 L55 55" stroke="#191918" stroke-width="3" fill="none" />
                            <path d="M25 40 L40 25 L55 40" stroke="#191918" stroke-width="3" fill="none" />
                            <rect x="38" y="40" width="4" height="25" fill="#191918" />
                        </svg>
                    </div>
                    <h3 class="card-title">Open Source Projects</h3>
                    <p class="card-subtitle">GitHub</p>
                </a>
            </div>
        </section>

        <!-- Featured Box -->
        <section class="featured-section">
            <div class="featured-box fade-on-scroll">
                <div class="featured-content">
                    <h3 class="featured-title">AI Engineering Handbook <span style="font-size: 0.75rem; font-weight: 400; color: var(--color-muted);">(中文)</span></h3>
                    <p class="featured-description">
                        A comprehensive guide covering AI engineering practices,
                        machine learning workflows, and best practices for building
                        production-ready AI systems.
                    </p>
                    <a href="https://fim-tech.feishu.cn/wiki/space/7524906799680929795" target="_blank"
                        rel="noopener noreferrer" class="featured-button">
                        Read handbook
                    </a>
                </div>
                <div class="featured-links">
                    <p class="featured-links-title">Learn more</p>
                    <a href="https://www.fim.com.cn/" target="_blank" rel="noopener noreferrer" class="featured-link">
                        <span>FIM Tech</span>
                        <span class="arrow">&rarr;</span>
                    </a>
                    <a href="https://www.slan.org.cn/" target="_blank" rel="noopener noreferrer" class="featured-link">
                        <span>SLAN Organization (中文)</span>
                        <span class="arrow">&rarr;</span>
                    </a>
                    <a href="https://www.wuz.com.cn/" target="_blank" rel="noopener noreferrer" class="featured-link">
                        <span>WUZ Platform (中文)</span>
                        <span class="arrow">&rarr;</span>
                    </a>
                </div>
            </div>
        </section>

        <!-- Connect Section -->
        <section class="connect-section" id="connect">
            <h2 class="section-title-small fade-on-scroll">Connect</h2>
            <div class="connect-list fade-on-scroll">
                <a href="https://x.com/tao_an_hpu" target="_blank" rel="noopener noreferrer" class="connect-item">
                    <span class="connect-name">X (Twitter)</span>
                    <span class="connect-category">Social</span>
                    <span class="connect-arrow">&rarr;</span>
                </a>
                <a href="https://www.linkedin.com/in/tao-hpu" target="_blank" rel="noopener noreferrer"
                    class="connect-item">
                    <span class="connect-name">LinkedIn</span>
                    <span class="connect-category">Professional</span>
                    <span class="connect-arrow">&rarr;</span>
                </a>
                <a href="https://tao-hpu.medium.com/" target="_blank" rel="noopener noreferrer" class="connect-item">
                    <span class="connect-name">Medium</span>
                    <span class="connect-category">Writing</span>
                    <span class="connect-arrow">&rarr;</span>
                </a>
                <a href="http://youtube.com/@tao-hpu" target="_blank" rel="noopener noreferrer" class="connect-item">
                    <span class="connect-name">YouTube</span>
                    <span class="connect-category">Videos</span>
                    <span class="connect-arrow">&rarr;</span>
                </a>
                <a href="https://www.instagram.com/tao_hpu/" target="_blank" rel="noopener noreferrer"
                    class="connect-item">
                    <span class="connect-name">Instagram</span>
                    <span class="connect-category">Photos</span>
                    <span class="connect-arrow">&rarr;</span>
                </a>
                <a href="https://orcid.org/0009-0006-2933-0320" target="_blank" rel="noopener noreferrer"
                    class="connect-item">
                    <span class="connect-name">ORCID</span>
                    <span class="connect-category">Academic</span>
                    <span class="connect-arrow">&rarr;</span>
                </a>
                <a href="mailto:tan1@my.hpu.edu" class="connect-item">
                    <span class="connect-name">Email</span>
                    <span class="connect-category">Contact</span>
                    <span class="connect-arrow">&rarr;</span>
                </a>
            </div>
        </section>

    </main>

    <!-- Dark Footer -->
    <footer class="footer-dark">
        <div class="footer-container">
            <!-- Logo -->
            <div class="footer-logo">T\A</div>

            <!-- Footer Columns -->
            <div class="footer-column">
                <h4>Research</h4>
                <a href="https://scholar.google.com/citations?user=HBIPWm4AAAAJ" target="_blank"
                    rel="noopener noreferrer">Google Scholar</a>
                <a href="https://arxiv.org/a/0009-0006-2933-0320.html" target="_blank"
                    rel="noopener noreferrer">arXiv</a>
                <a href="https://orcid.org/0009-0006-2933-0320" target="_blank" rel="noopener noreferrer">ORCID</a>
                <a href="https://fim-tech.feishu.cn/wiki/space/7524906799680929795" target="_blank"
                    rel="noopener noreferrer">AI Handbook (中文)</a>
            </div>

            <div class="footer-column">
                <h4>Projects</h4>
                <a href="https://www.fim.com.cn/" target="_blank" rel="noopener noreferrer">FIM Tech</a>
                <a href="https://www.slan.org.cn/" target="_blank" rel="noopener noreferrer">SLAN (中文)</a>
                <a href="https://www.wuz.com.cn/" target="_blank" rel="noopener noreferrer">WUZ (中文)</a>
            </div>

            <div class="footer-column">
                <h4>Social</h4>
                <a href="https://x.com/tao_an_hpu" target="_blank" rel="noopener noreferrer">X (Twitter)</a>
                <a href="https://www.linkedin.com/in/tao-hpu" target="_blank" rel="noopener noreferrer">LinkedIn</a>
                <a href="https://github.com/tao-hpu" target="_blank" rel="noopener noreferrer">GitHub</a>
                <a href="https://tao-hpu.medium.com/" target="_blank" rel="noopener noreferrer">Medium</a>
            </div>

            <div class="footer-column">
                <h4>Media</h4>
                <a href="http://youtube.com/@tao-hpu" target="_blank" rel="noopener noreferrer">YouTube</a>
                <a href="https://www.instagram.com/tao_hpu/" target="_blank" rel="noopener noreferrer">Instagram</a>
                <a href="mailto:tan1@my.hpu.edu">Email</a>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="footer-bottom-left">
                <a href="https://github.com/tao-hpu/tao-hpu.github.io" target="_blank" rel="noopener noreferrer">Source</a>
                <span class="footer-dot">·</span>
                <a href="https://github.com/tao-hpu/tao-hpu.github.io/fork" target="_blank" rel="noopener noreferrer">Fork</a>
            </div>
            <div class="footer-bottom-right">
                <span>&copy; <span id="year"></span> Tao An</span>
                <span class="footer-dot">·</span>
                <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreferrer">CC BY-NC-SA 4.0</a>
            </div>
        </div>
    </footer>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        document.getElementById('year').textContent = new Date().getFullYear();

        // Scroll-triggered fade in animation
        const fadeElements = document.querySelectorAll('.fade-on-scroll');
        const observerOptions = {
            threshold: 0.15,
            rootMargin: '0px 0px -50px 0px'
        };

        const fadeObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    fadeObserver.unobserve(entry.target);
                }
            });
        }, observerOptions);

        fadeElements.forEach(el => fadeObserver.observe(el));

        // Smooth scroll for navigation with nav height offset
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const nav = document.querySelector('.nav');
                    const navHeight = nav ? nav.offsetHeight : 0;
                    const targetPosition = target.getBoundingClientRect().top + window.scrollY - navHeight;
                    window.scrollTo({ top: targetPosition, behavior: 'smooth' });
                }
            });
        });

        // Active nav link on scroll
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('.nav-links a');

        function updateActiveNav() {
            const scrollY = window.scrollY;

            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                const sectionHeight = section.offsetHeight;
                const sectionId = section.getAttribute('id');

                if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === '#' + sectionId) {
                            link.classList.add('active');
                        }
                    });
                }
            });

            // Remove active if at top of page
            if (scrollY < 200) {
                navLinks.forEach(link => link.classList.remove('active'));
            }
        }

        window.addEventListener('scroll', updateActiveNav);
        updateActiveNav();

        // D3.js AI Mind Illustration - Organic hand-drawn style
        (function () {
            const container = document.getElementById('neural-network');
            const width = 420;
            const height = 420;
            const cx = width / 2;
            const cy = height / 2;

            // Colors
            const accentColor = '#d97757';
            const darkColor = '#191918';
            const lightAccent = 'rgba(217, 119, 87, 0.15)';

            // Create SVG
            const svg = d3.select(container)
                .append('svg')
                .attr('viewBox', `0 0 ${width} ${height}`)
                .attr('class', 'hero-illustration')
                .style('cursor', 'pointer');

            // Add slight hand-drawn effect with filter
            const defs = svg.append('defs');
            const filter = defs.append('filter')
                .attr('id', 'hand-drawn')
                .attr('x', '-20%')
                .attr('y', '-20%')
                .attr('width', '140%')
                .attr('height', '140%');
            filter.append('feTurbulence')
                .attr('type', 'fractalNoise')
                .attr('baseFrequency', '0.04')
                .attr('numOctaves', '1')
                .attr('result', 'noise');
            filter.append('feDisplacementMap')
                .attr('in', 'SourceGraphic')
                .attr('in2', 'noise')
                .attr('scale', '2')
                .attr('xChannelSelector', 'R')
                .attr('yChannelSelector', 'G');

            // Create main group with filter
            const mainGroup = svg.append('g')
                .attr('filter', 'url(#hand-drawn)');

            // Draw concentric arcs (fingerprint/mind waves) - scaled up
            const arcGroup = mainGroup.append('g').attr('class', 'arcs');
            const arcRadii = [60, 85, 110, 135, 165];

            arcRadii.forEach((r, i) => {
                const startAngle = -Math.PI * 0.7;
                const endAngle = Math.PI * 0.4;

                const arc = d3.arc()
                    .innerRadius(r - 3)
                    .outerRadius(r)
                    .startAngle(startAngle)
                    .endAngle(endAngle);

                arcGroup.append('path')
                    .attr('d', arc)
                    .attr('transform', `translate(${cx - 25}, ${cy + 15})`)
                    .attr('fill', darkColor)
                    .attr('opacity', 0.12 + i * 0.03)
                    .attr('class', `arc-${i}`);
            });

            // Neural network nodes - scaled up positions
            const nodes = [
                { x: cx - 80, y: cy - 95, r: 11, type: 'input' },
                { x: cx - 112, y: cy - 25, r: 10, type: 'input' },
                { x: cx - 95, y: cy + 55, r: 11, type: 'input' },
                { x: cx, y: cy - 65, r: 14, type: 'hidden' },
                { x: cx + 15, y: cy + 15, r: 16, type: 'hidden' },
                { x: cx - 25, y: cy + 82, r: 12, type: 'hidden' },
                { x: cx + 82, y: cy - 40, r: 15, type: 'output' },
                { x: cx + 95, y: cy + 55, r: 14, type: 'output' },
            ];

            // Connections - organic curved paths
            const connections = [
                [0, 3], [0, 4], [1, 3], [1, 4], [1, 5], [2, 4], [2, 5],
                [3, 6], [3, 7], [4, 6], [4, 7], [5, 7]
            ];

            // Draw connections as curved lines
            const linkGroup = mainGroup.append('g').attr('class', 'links');
            const linkElements = [];

            connections.forEach(([i, j], idx) => {
                const source = nodes[i];
                const target = nodes[j];

                // Create curved path
                const midX = (source.x + target.x) / 2 + (Math.random() - 0.5) * 20;
                const midY = (source.y + target.y) / 2 + (Math.random() - 0.5) * 20;

                const link = linkGroup.append('path')
                    .attr('d', `M ${source.x} ${source.y} Q ${midX} ${midY} ${target.x} ${target.y}`)
                    .attr('fill', 'none')
                    .attr('stroke', darkColor)
                    .attr('stroke-width', 2.5)
                    .attr('stroke-linecap', 'round')
                    .attr('opacity', 0.2)
                    .style('cursor', 'pointer')
                    .on('click', function(event) {
                        event.stopPropagation();

                        // Highlight line
                        d3.select(this)
                            .transition()
                            .duration(100)
                            .attr('stroke', accentColor)
                            .attr('opacity', 0.8)
                            .attr('stroke-width', 4)
                            .transition()
                            .duration(600)
                            .attr('stroke', darkColor)
                            .attr('opacity', 0.2)
                            .attr('stroke-width', 2.5);

                        // Fast particle along the line
                        for (let p = 0; p < 3; p++) {
                            const particle = particleGroup.append('circle')
                                .attr('cx', source.x)
                                .attr('cy', source.y)
                                .attr('r', 5 - p)
                                .attr('fill', accentColor)
                                .attr('opacity', 0);

                            particle.transition()
                                .delay(p * 60)
                                .duration(0)
                                .attr('opacity', 0.9 - p * 0.2)
                                .transition()
                                .duration(400)
                                .ease(d3.easeQuadOut)
                                .attr('cx', target.x)
                                .attr('cy', target.y)
                                .attr('r', 2)
                                .transition()
                                .duration(200)
                                .attr('opacity', 0)
                                .remove();
                        }
                    });

                linkElements.push(link);
            });

            // Connection line pulse animation
            function pulseConnections() {
                linkElements.forEach((link, idx) => {
                    const delay = idx * 150 + Math.random() * 200;
                    link.transition()
                        .delay(delay)
                        .duration(800)
                        .attr('opacity', 0.45)
                        .attr('stroke-width', 3)
                        .transition()
                        .duration(1000)
                        .attr('opacity', 0.2)
                        .attr('stroke-width', 2.5);
                });
            }

            // Particle group for animations
            const particleGroup = svg.append('g').attr('class', 'particles');

            // Draw nodes
            const nodeGroup = mainGroup.append('g').attr('class', 'nodes');

            const nodeElements = nodeGroup.selectAll('circle')
                .data(nodes)
                .enter()
                .append('circle')
                .attr('cx', d => d.x)
                .attr('cy', d => d.y)
                .attr('r', d => d.r)
                .attr('fill', d => d.type === 'output' ? accentColor : darkColor)
                .attr('opacity', d => d.type === 'hidden' ? 0.4 : 0.85)
                .style('cursor', 'pointer')
                .on('click', function(event, d) {
                    event.stopPropagation();

                    // Ripple effect
                    const ripple = svg.append('circle')
                        .attr('cx', d.x)
                        .attr('cy', d.y)
                        .attr('r', d.r)
                        .attr('fill', 'none')
                        .attr('stroke', d.type === 'output' ? accentColor : darkColor)
                        .attr('stroke-width', 3)
                        .attr('opacity', 0.8);

                    ripple.transition()
                        .duration(600)
                        .attr('r', d.r * 4)
                        .attr('opacity', 0)
                        .remove();

                    // Radiate particles
                    for (let i = 0; i < 6; i++) {
                        const angle = (i / 6) * Math.PI * 2;
                        const particle = particleGroup.append('circle')
                            .attr('cx', d.x)
                            .attr('cy', d.y)
                            .attr('r', 3)
                            .attr('fill', accentColor)
                            .attr('opacity', 0.9);

                        particle.transition()
                            .duration(500)
                            .attr('cx', d.x + Math.cos(angle) * 50)
                            .attr('cy', d.y + Math.sin(angle) * 50)
                            .attr('r', 1)
                            .attr('opacity', 0)
                            .remove();
                    }

                    // Node pulse
                    d3.select(this)
                        .transition()
                        .duration(150)
                        .attr('r', d.r * 1.5)
                        .transition()
                        .duration(300)
                        .attr('r', d.r);
                });

            // Click on empty space - all nodes pulse
            svg.on('click', function(event) {
                // All nodes pulse together
                nodeElements.each(function(d) {
                    const node = d3.select(this);
                    const baseOpacity = d.type === 'hidden' ? 0.4 : 0.85;

                    node.transition()
                        .duration(200)
                        .attr('r', d.r * 1.4)
                        .attr('opacity', 1)
                        .transition()
                        .duration(400)
                        .attr('r', d.r)
                        .attr('opacity', baseOpacity);
                });

                // Flash all connections
                linkElements.forEach(link => {
                    link.transition()
                        .duration(200)
                        .attr('opacity', 0.5)
                        .attr('stroke-width', 4)
                        .transition()
                        .duration(400)
                        .attr('opacity', 0.2)
                        .attr('stroke-width', 2.5);
                });
            });

            // Animation: Send organic pulses through network
            function sendPulse() {
                const duration = 1200;

                // Randomly select a few connections to animate
                const activeConns = connections.filter(() => Math.random() > 0.6);

                activeConns.forEach(([i, j]) => {
                    const source = nodes[i];
                    const target = nodes[j];
                    const delay = (source.type === 'input' ? 0 : 600) + Math.random() * 400;

                    // Create flowing particle with trail
                    const trailCount = 3;
                    for (let t = 0; t < trailCount; t++) {
                        const trailDelay = delay + t * 80;
                        const trailOpacity = 0.8 - t * 0.25;
                        const trailSize = 4 - t * 1;

                        const particle = particleGroup.append('circle')
                            .attr('cx', source.x)
                            .attr('cy', source.y)
                            .attr('r', trailSize)
                            .attr('fill', accentColor)
                            .attr('opacity', 0);

                        particle.transition()
                            .delay(trailDelay)
                            .duration(0)
                            .attr('opacity', trailOpacity)
                            .transition()
                            .duration(duration)
                            .ease(d3.easeCubicInOut)
                            .attr('cx', target.x)
                            .attr('cy', target.y)
                            .attr('r', trailSize * 0.5)
                            .transition()
                            .duration(300)
                            .attr('opacity', 0)
                            .remove();
                    }
                });

                // Pulse input nodes - Layer 1
                nodeElements.filter(d => d.type === 'input')
                    .each(function (d, i) {
                        d3.select(this)
                            .transition()
                            .delay(i * 100)
                            .duration(250)
                            .attr('r', d.r * 1.5)
                            .attr('opacity', 1)
                            .transition()
                            .duration(400)
                            .attr('r', d.r)
                            .attr('opacity', 0.85);
                    });

                // Pulse hidden nodes - Layer 2
                nodeElements.filter(d => d.type === 'hidden')
                    .each(function (d, i) {
                        d3.select(this)
                            .transition()
                            .delay(600 + i * 120)
                            .duration(300)
                            .attr('r', d.r * 1.35)
                            .attr('opacity', 0.7)
                            .transition()
                            .duration(500)
                            .attr('r', d.r)
                            .attr('opacity', 0.4);
                    });

                // Pulse output nodes - Layer 3
                nodeElements.filter(d => d.type === 'output')
                    .each(function (d, i) {
                        d3.select(this)
                            .transition()
                            .delay(1300 + i * 150)
                            .duration(350)
                            .attr('r', d.r * 1.4)
                            .attr('opacity', 1)
                            .transition()
                            .duration(600)
                            .attr('r', d.r)
                            .attr('opacity', 0.85);
                    });
            }

            // Output ripple effect
            function outputRipple() {
                nodes.filter(n => n.type === 'output').forEach(node => {
                    const ripple = svg.append('circle')
                        .attr('cx', node.x)
                        .attr('cy', node.y)
                        .attr('r', node.r)
                        .attr('fill', 'none')
                        .attr('stroke', accentColor)
                        .attr('stroke-width', 2)
                        .attr('opacity', 0.5);

                    ripple.transition()
                        .duration(1200)
                        .ease(d3.easeQuadOut)
                        .attr('r', node.r * 3)
                        .attr('opacity', 0)
                        .remove();
                });
            }

            // Arc breathing animation
            function breatheArcs() {
                arcRadii.forEach((r, i) => {
                    svg.select(`.arc-${i}`)
                        .transition()
                        .delay(i * 100)
                        .duration(1500)
                        .attr('opacity', 0.2 + i * 0.05)
                        .transition()
                        .duration(1500)
                        .attr('opacity', 0.12 + i * 0.03);
                });
            }

            // Hidden nodes breathing animation
            let breathePhase = 0;
            function breatheNodes() {
                breathePhase += 0.03;
                nodeElements.filter(d => d.type === 'hidden')
                    .attr('r', d => d.r * (1 + Math.sin(breathePhase) * 0.12));
                requestAnimationFrame(breatheNodes);
            }
            breatheNodes();

            // Gentle sway animation for nodes (rotate around Z axis)
            let swayAngle = 0;
            function swayNodes() {
                swayAngle += 0.015;
                const angle = Math.sin(swayAngle) * 3; // ±3 degrees
                nodeGroup.attr('transform', `rotate(${angle}, ${cx}, ${cy})`);
                linkGroup.attr('transform', `rotate(${angle}, ${cx}, ${cy})`);
                requestAnimationFrame(swayNodes);
            }
            swayNodes();

            // Arc slow rotation animation - alternating directions
            const arcAngles = arcRadii.map(() => 0);

            function rotateArcs() {
                arcRadii.forEach((r, i) => {
                    // 相邻弧线方向交替：奇数正向，偶数逆向
                    const direction = i % 2 === 0 ? 1 : -1;
                    arcAngles[i] += 0.12 * direction;
                    svg.select(`.arc-${i}`)
                        .attr('transform', `translate(${cx - 25}, ${cy + 15}) rotate(${arcAngles[i]})`);
                });
                requestAnimationFrame(rotateArcs);
            }
            rotateArcs();

            // Main animation loop
            function animate() {
                sendPulse();
                pulseConnections();
                setTimeout(outputRipple, 1800);
                breatheArcs();
            }

            // Start animations
            animate();
            setInterval(animate, 4000);

            // 3D rotation with mouse interaction
            let rotateX = 0;
            let rotateY = 0;
            let targetRotateX = 0;
            let targetRotateY = 0;
            let autoRotate = 0;
            let isHovering = false;

            // Set up 3D perspective
            container.style.perspective = '800px';

            // Smooth interpolation
            function lerp(current, target, factor) {
                return current + (target - current) * factor;
            }

            // Mouse interaction
            container.addEventListener('mouseenter', () => { isHovering = true; });
            container.addEventListener('mouseleave', () => {
                isHovering = false;
                targetRotateX = 0;
                targetRotateY = 0;
            });

            container.addEventListener('mousemove', (e) => {
                if (!isHovering) return;
                const rect = container.getBoundingClientRect();
                const x = (e.clientX - rect.left) / rect.width - 0.5;
                const y = (e.clientY - rect.top) / rect.height - 0.5;
                targetRotateY = x * 25;
                targetRotateX = -y * 15;
            });

            // Animation loop
            function animate3D() {
                if (isHovering) {
                    rotateX = lerp(rotateX, targetRotateX, 0.1);
                    rotateY = lerp(rotateY, targetRotateY, 0.1);
                } else {
                    autoRotate += 0.3;
                    const wobbleY = Math.sin(autoRotate * 0.02) * 6;
                    const wobbleX = Math.cos(autoRotate * 0.015) * 4;
                    rotateX = lerp(rotateX, wobbleX, 0.05);
                    rotateY = lerp(rotateY, wobbleY, 0.05);
                }
                svg.attr('style', `transform: rotateY(${rotateY}deg) rotateX(${rotateX}deg); transform-style: preserve-3d;`);
                requestAnimationFrame(animate3D);
            }
            animate3D();
        })();
    </script>
</body>

</html>